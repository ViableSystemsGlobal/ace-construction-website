(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[785],{8285:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>l});var r=s(5155),d=s(2115);function l(){let[e,a]=(0,d.useState)([]),[s,l]=(0,d.useState)(null),[n,t]=(0,d.useState)([]),[o,i]=(0,d.useState)([]);async function c(){let e=await fetch("/api/cms/pages");a(await e.json())}async function u(e){let a=await fetch("/api/cms/pages/".concat(e)),s=await a.json();l({slug:s.slug,title:s.title,description:s.description}),t(s.sections||[]),i(s.media||[])}async function p(){s&&(await fetch("/api/cms/pages/".concat(s.slug),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,sections:n,media:o})}),await c())}return(0,d.useEffect)(()=>{c()},[]),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center gap-3",children:(0,r.jsx)("input",{className:"rounded-md border border-foreground/10 p-3",placeholder:"New page slug (e.g. home)",onKeyDown:async e=>{"Enter"===e.key&&(await fetch("/api/cms/pages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:e.target.value,title:"New Page",description:""})}),e.target.value="",await c())}})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,r.jsx)("aside",{className:"md:col-span-1 space-y-2",children:e.map(e=>(0,r.jsx)("button",{className:"w-full text-left rounded-md border px-3 py-2 ".concat((null==s?void 0:s.slug)===e.slug?"border-primary":"border-foreground/10"),onClick:()=>u(e.slug),children:e.slug},e.slug))}),(0,r.jsx)("main",{className:"md:col-span-3 space-y-6",children:s?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,r.jsx)("input",{className:"rounded-md border border-foreground/10 p-3",value:s.title,onChange:e=>l({...s,title:e.target.value})}),(0,r.jsx)("input",{className:"rounded-md border border-foreground/10 p-3",value:s.description,onChange:e=>l({...s,description:e.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-2 font-semibold",children:"Sections"}),(0,r.jsx)("div",{className:"space-y-2",children:n.map((e,a)=>{var s,d;return(0,r.jsx)("div",{className:"rounded-md border border-foreground/10 p-3",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[(0,r.jsx)("input",{className:"rounded-md border border-foreground/10 p-2",placeholder:"key",value:e.key,onChange:s=>{let r=[...n];r[a]={...e,key:s.target.value},t(r)}}),(0,r.jsx)("input",{className:"rounded-md border border-foreground/10 p-2 md:col-span-2",placeholder:"data (JSON)",value:JSON.stringify(null!=(s=e.data)?s:{}),onChange:s=>{let r=[...n],d={};try{d=JSON.parse(s.target.value)}catch(e){d={}}r[a]={...e,data:d},t(r)}})]})},null!=(d=e.id)?d:a)})}),(0,r.jsx)("button",{className:"btn-outline mt-2",onClick:()=>t([...n,{key:"",data:{}}]),children:"Add section"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-2 font-semibold",children:"Images"}),(0,r.jsx)("div",{className:"space-y-2",children:o.map((e,a)=>{var s,d;return(0,r.jsx)("div",{className:"rounded-md border border-foreground/10 p-3",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[(0,r.jsx)("input",{className:"rounded-md border border-foreground/10 p-2",placeholder:"url",value:e.url,onChange:s=>{let r=[...o];r[a]={...e,url:s.target.value},i(r)}}),(0,r.jsx)("input",{className:"rounded-md border border-foreground/10 p-2",placeholder:"alt",value:e.alt,onChange:s=>{let r=[...o];r[a]={...e,alt:s.target.value},i(r)}}),(0,r.jsx)("input",{className:"rounded-md border border-foreground/10 p-2",placeholder:"sectionKey",value:null!=(s=e.sectionKey)?s:"",onChange:s=>{let r=[...o];r[a]={...e,sectionKey:s.target.value},i(r)}})]})},null!=(d=e.id)?d:a)})}),(0,r.jsx)("button",{className:"btn-outline mt-2",onClick:()=>i([...o,{url:"",alt:"",sectionKey:""}]),children:"Add image"})]}),(0,r.jsx)("button",{className:"btn-primary",onClick:p,children:"Save page"})]}):(0,r.jsx)("div",{children:"Select a page from the left or create a new one."})})]})]})}},8934:(e,a,s)=>{Promise.resolve().then(s.bind(s,8285))}},e=>{e.O(0,[441,964,358],()=>e(e.s=8934)),_N_E=e.O()}]);